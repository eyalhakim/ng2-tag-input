{"version":3,"sources":["tag.component.ts"],"names":[],"mappings":"AAAA,OAAO,EACH,SAAS,EACT,KAAK,EACL,MAAM,EACN,YAAY,EAEZ,UAAU,EACV,YAAY,EACZ,SAAS,EACT,iBAAiB,EACjB,SAAS,EACZ,MAAM,eAAA,CAAgB;AAGvB,OAAO,EAAE,SAAA,EAAU,MAAO,QAAA,CAAS;AAInC,IAAM,aAAA,GAAgB,MAAe,CAAC,aAAC,CAAa;AACpD,IAAM,UAAA,GAAa,MAAe,CAAC,UAAC,CAAU;AAG9C,IAAM,SAAA,GAAY,OAAO,MAAA,KAAW,WAAA,GAAc,MAAA,CAAO,SAAC,GAAW;IACjE,SAAS,EAAE,QAAA;IACX,MAAM,EAAE,YAAA;CACX,CAAC;AAEF,IAAM,QAAA,GAAW,QAAA,CAAS,IAAC,CAAI,SAAC,CAAS,SAAC,CAAS,IAAI,YAAA,CAAa,IAAC,CAAI,SAAC,CAAS,MAAC,CAAM,CAAC;AAG3F;IAoGI,sBAAmB,OAAmB,EACnB,QAAmB,EAClB,KAAwB;QAFzB,YAAO,GAAP,OAAO,CAAY;QACnB,aAAQ,GAAR,QAAQ,CAAW;QAClB,UAAK,GAAL,KAAK,CAAmB;QA1DpC,aAAQ,GAAG,KAAK,CAAC;QAMjB,aAAQ,GAA2B,IAAI,YAAY,EAAY,CAAC;QAMhE,aAAQ,GAA2B,IAAI,YAAY,EAAY,CAAC;QAMhE,WAAM,GAA2B,IAAI,YAAY,EAAY,CAAC;QAM9D,cAAS,GAAsB,IAAI,YAAY,EAAO,CAAC;QAMvD,gBAAW,GAA2B,IAAI,YAAY,EAAY,CAAC;QAapE,sBAAiB,GAAG,KAAK,CAAC;QAM1B,gBAAW,GAAG,MAAM,CAAC;IASmB,CAAC;IAvBhD,sBAAW,kCAAQ;aAAnB;YACI,MAAM,CAAC,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAK,IAAI,CAAC;QAC1E,CAAC;;;OAAA;IAAA,CAAC;IA0BK,6BAAM,GAAb,UAAc,MAAmB;QAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACjC,MAAM,CAAC;QACX,CAAC;QAED,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACT,MAAM,CAAC,eAAe,EAAE,CAAC;QAC7B,CAAC;QAED,IAAI,CAAC,KAAK,EAAE,CAAC;QAEb,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACnC,CAAC;IAKM,6BAAM,GAAb,UAAc,MAAkB;QAC5B,MAAM,CAAC,eAAe,EAAE,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IAKM,4BAAK,GAAZ;QACI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;IACvC,CAAC;IAOM,8BAAO,GAAd,UAAe,KAAoB;QAC/B,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACzB,KAAK,CAAC,OAAO,KAAK,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAC1E,MAAM,CAAC;QACX,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC,KAAK,OAAA,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,CAAC,CAAC;IACpD,CAAC;IAKM,4BAAK,GAAZ;QACI,IAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC;QACvD,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAEvB,UAAU,CAAC,cAAM,OAAA,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,EAAzB,CAAyB,EAAE,EAAE,CAAC,CAAC;IACpD,CAAC;IAKM,qCAAc,GAArB;QACI,IAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC;QACvD,IAAM,SAAS,GAAG,cAAc,CAAC;QAEjC,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,aAAa,EAAE,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC,KAAK,EAAE,CAAC;QAC1E,CAAC;QAED,IAAI,CAAC,iBAAiB,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC;QACjD,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IACpF,CAAC;IAMM,gCAAS,GAAhB,UAAiB,KAAU;QACvB,IAAM,QAAQ,GAAW,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC;QAChD,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAM,MAAM,GAAG,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,GAAG,QAAQ,aACnD,GAAC,IAAI,CAAC,UAAU,IAAG,QAAQ,EAAE,GAAC,IAAI,CAAC,SAAS,IAAG,QAAQ,KAAC,CAAC;QAC9D,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;IAC7B,CAAC;IAOM,sCAAe,GAAtB,UAAuB,IAAc;QACjC,MAAM,CAAC,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAClE,CAAC;IAQM,sCAAe,GAAtB;QACI,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ;YACjB,CAAC,IAAI,CAAC,iBAAiB;YACvB,QAAQ;YACR,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAMO,6CAAsB,GAA9B;QACI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IAC1F,CAAC;IAMO,sCAAe,GAAvB,UAAwB,MAAqB;QACzC,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,MAAM,CAAC,cAAc,EAAE,CAAC;QAExB,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IAC/B,CAAC;IAKO,oCAAa,GAArB;QAAA,iBAmBC;QAlBG,IAAM,KAAK,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAE5C,IAAM,MAAM,GAAG,UAAC,KAAe;YAC3B,MAAM,CAAC,OAAO,KAAK,KAAK,QAAQ;gBAC5B,KAAK,KAAK,KAAK;gBACf,KAAK,CAAC,KAAI,CAAC,UAAU,CAAC,KAAK,KAAK,CAAC;QACzC,CAAC,CAAC;QAGF,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAE9C,IAAI,CAAC,KAAK,GAAG,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,GAAG,KAAK,aAC9C,GAAC,IAAI,CAAC,UAAU,IAAG,SAAS,EAAE,GAAC,IAAI,CAAC,SAAS,IAAG,SAAS,KAAC,CAAC;YAGhE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACtC,CAAC;;IACL,CAAC;IAMO,0CAAmB,GAA3B;QACI,MAAM,CAAC,CAAC,IAAI,CAAC,QAAQ;YACb,CAAC,IAAI,CAAC,QAAQ;YACd,IAAI,CAAC,SAAS;YACd,CAAC,IAAI,CAAC,iBAAiB,CAAC;IACpC,CAAC;IAgCL,mBAAC;AAAD,CAvSA,AAuSC;;AA/BM,uBAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;gBACtB,QAAQ,EAAE,KAAK;gBACf,WAAW,EAAE,qBAAqB;gBAClC,SAAS,EAAE,CAAE,4BAA4B,CAAE;aAC9C,EAAG,EAAE;CACL,CAAC;AAEK,2BAAc,GAAmE,cAAM,OAAA;IAC9F,EAAC,IAAI,EAAE,UAAU,GAAG;IACpB,EAAC,IAAI,EAAE,SAAS,GAAG;IACnB,EAAC,IAAI,EAAE,iBAAiB,GAAG;CAC1B,EAJ6F,CAI7F,CAAC;AACK,2BAAc,GAA2C;IAChE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC3B,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC/B,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC9B,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC9B,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC/B,YAAY,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAChC,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC3B,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC/B,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IAC9B,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;IAC/B,UAAU,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;IAC/B,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;IAC7B,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;IAChC,aAAa,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;IAClC,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,SAAS,EAAG,EAAE,EAAE;IACrD,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,EAAG,EAAE,EAAE;CACpE,CAAC","file":"tag.component.js","sourceRoot":"","sourcesContent":["import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    TemplateRef,\n    ElementRef,\n    HostListener,\n    ViewChild,\n    ChangeDetectorRef,\n    Renderer2\n} from '@angular/core';\n\nimport { TagModel } from '../../core';\nimport { TagRipple } from '../tag';\n\n// angular universal hacks\n/* tslint:disable-next-line */\nconst KeyboardEvent = (global as any).KeyboardEvent;\nconst MouseEvent = (global as any).MouseEvent;\n\n// mocking navigator\nconst navigator = typeof window !== 'undefined' ? window.navigator : {\n    userAgent: 'Chrome',\n    vendor: 'Google Inc'\n};\n\nconst isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\n\nexport class TagComponent {\n    /**\n     * @name model {TagModel}\n     */\n     public model: TagModel;\n\n    /**\n     * @name removable {boolean}\n     */\n     public removable: boolean;\n\n    /**\n     * @name editable {boolean}\n     */\n     public editable: boolean;\n\n    /**\n     * @name template {TemplateRef<any>}\n     */\n     public template: TemplateRef<any>;\n\n    /**\n     * @name displayBy {string}\n     */\n     public displayBy: string;\n\n    /**\n     * @name identifyBy {string}\n     */\n     public identifyBy: string;\n\n    /**\n     * @name index {number}\n     */\n     public index: number;\n\n    /**\n     * @name hasRipple\n     */\n     public hasRipple: boolean;\n\n    /**\n     * @name disabled\n     */\n     public disabled = false;\n\n    /**\n     * @name onSelect\n     * @type {EventEmitter<TagModel>}\n     */\n     public onSelect: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name onRemove\n     * @type {EventEmitter<TagModel>}\n     */\n     public onRemove: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name onBlur\n     * @type {EventEmitter<TagModel>}\n     */\n     public onBlur: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name onKeyDown\n     * @type {EventEmitter<any>}\n     */\n     public onKeyDown: EventEmitter<any> = new EventEmitter<any>();\n\n    /**\n     * @name onTagEdited\n     * @type {EventEmitter<any>}\n     */\n     public onTagEdited: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name readonly {boolean}\n     */\n    public get readonly(): boolean {\n        return typeof this.model !== 'string' && this.model.readonly === true;\n    };\n\n    /**\n     * @name editModeActivated\n     * @type {boolean}\n     */\n    public editModeActivated = false;\n\n    /**\n     * @name rippleState\n     * @type {string}\n     */\n    public rippleState = 'none';\n\n    /**\n     * @name ripple {TagRipple}\n     */\n     public ripple: TagRipple;\n\n    constructor(public element: ElementRef,\n                public renderer: Renderer2,\n                private cdRef: ChangeDetectorRef) {}\n\n    /**\n     * @name select\n     */\n    public select($event?: MouseEvent): void {\n        if (this.readonly || this.disabled) {\n            return;\n        }\n\n        if ($event) {\n            $event.stopPropagation();\n        }\n\n        this.focus();\n\n        this.onSelect.emit(this.model);\n    }\n\n    /**\n     * @name remove\n     */\n    public remove($event: MouseEvent): void {\n        $event.stopPropagation();\n        this.onRemove.emit(this);\n    }\n\n    /**\n     * @name focus\n     */\n    public focus(): void {\n        this.element.nativeElement.focus();\n    }\n\n    /**\n     * @name keydown\n     * @param event\n     */\n    \n    public keydown(event: KeyboardEvent): void {\n        if (this.editModeActivated) {\n            event.keyCode === 13 ? this.disableEditMode(event) : this.storeNewValue();\n            return;\n        }\n\n        this.onKeyDown.emit({event, model: this.model});\n    }\n\n    /**\n     * @name blink\n     */\n    public blink(): void {\n        const classList = this.element.nativeElement.classList;\n        classList.add('blink');\n\n        setTimeout(() => classList.remove('blink'), 50);\n    }\n\n    /**\n     * @name toggleEditMode\n     */\n    public toggleEditMode(): void {\n        const classList = this.element.nativeElement.classList;\n        const className = 'tag--editing';\n\n        if (this.editModeActivated) {\n            this.storeNewValue();\n        } else {\n            this.element.nativeElement.querySelector('[contenteditable]').focus();\n        }\n\n        this.editModeActivated = !this.editModeActivated;\n        this.editModeActivated ? classList.add(className) : classList.remove(className);\n    }\n\n    /**\n     * @name onBlurred\n     * @param event\n     */\n    public onBlurred(event: any): void {\n        const newValue: string = event.target.innerText;\n        this.toggleEditMode();\n        const result = typeof this.model === 'string' ? newValue :\n            {[this.identifyBy]: newValue, [this.displayBy]: newValue};\n        this.onBlur.emit(result);\n    }\n\n    /**\n     * @name getDisplayValue\n     * @param item\n     * @returns {string}\n     */\n    public getDisplayValue(item: TagModel): string {\n        return typeof item === 'string' ? item : item[this.displayBy];\n    }\n\n    /**\n     * @desc returns whether the ripple is visible or not\n     * only works in Chrome\n     * @name isRippleVisible\n     * @returns {boolean}\n     */\n    public isRippleVisible(): boolean {\n        return !this.readonly &&\n            !this.editModeActivated &&\n            isChrome &&\n            this.hasRipple;\n    }\n\n    /**\n     * @name getContentEditableText\n     * @returns {string}\n     */\n    private getContentEditableText(): string {\n        return this.element.nativeElement.querySelector('[contenteditable]').innerText.trim();\n    }\n\n    /**\n     * @name disableEditMode\n     * @param $event\n     */\n    private disableEditMode($event: KeyboardEvent): void {\n        this.editModeActivated = false;\n        $event.preventDefault();\n\n        this.cdRef.detectChanges();\n    }\n\n    /**\n     * @name storeNewValue\n     */\n    private storeNewValue(): void {\n        const input = this.getContentEditableText();\n\n        const exists = (model: TagModel) => {\n            return typeof model === 'string' ?\n                model === input :\n                model[this.identifyBy] === input;\n        };\n\n        // if the value changed, replace the value in the model\n        if (exists(this.model)) {\n            const itemValue = this.model[this.identifyBy];\n\n            this.model = typeof this.model === 'string' ? input :\n                {[this.identifyBy]: itemValue, [this.displayBy]: itemValue};\n\n            // emit output\n            this.onTagEdited.emit(this.model);\n        }\n    }\n\n    /**\n     * @name isDeleteIconVisible\n     * @returns {boolean}\n     */\n    private isDeleteIconVisible(): boolean {\n        return !this.readonly &&\n                !this.disabled &&\n                this.removable &&\n                !this.editModeActivated;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'tag',\n    templateUrl: './tag.template.html',\n    styleUrls: [ './tag-component.style.scss' ]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n{type: ChangeDetectorRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'model': [{ type: Input },],\n'removable': [{ type: Input },],\n'editable': [{ type: Input },],\n'template': [{ type: Input },],\n'displayBy': [{ type: Input },],\n'identifyBy': [{ type: Input },],\n'index': [{ type: Input },],\n'hasRipple': [{ type: Input },],\n'disabled': [{ type: Input },],\n'onSelect': [{ type: Output },],\n'onRemove': [{ type: Output },],\n'onBlur': [{ type: Output },],\n'onKeyDown': [{ type: Output },],\n'onTagEdited': [{ type: Output },],\n'ripple': [{ type: ViewChild, args: [TagRipple, ] },],\n'keydown': [{ type: HostListener, args: ['keydown', ['$event'], ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}